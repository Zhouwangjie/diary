# 日记应用使用手册

这是一个专注于写作和情感记录的日记应用。通过定时写作、情感分析和月度回顾，帮助你更好地记录生活，关注内心成长。

## 功能特点

- 定时写作：每天限写一篇，让写作更加专注
- 情感分析：AI 自动分析情感倾向，提供心理反馈
- 时间记录：自动记录写作时长，培养写作习惯
- 月度回顾：自动生成月度情感信件，帮助回顾和反思
- 多维度展示：支持时间流和时间格两种查看方式

## 使用指南

### 1. 写日记（首页）

- **开始写作**：点击"开始写作"按钮，开启今天的写作时间
- **写作限制**：
  - 每天仅可写作一篇
  - 字数限制为 2000 字
  - 写作时会自动记录时长
- **提交方式**：写作完成后点击"提交"按钮
- **AI 反馈**：提交后会收到 AI 的情感分析和建议
- **写作时间**：每天 0 点刷新写作机会

### 2. 时间流（日记列表）

- **查看日记**：按时间顺序展示所有日记
- **展开/收起**：点击日记内容或"展开"按钮可查看全文
- **删除日记**：
  - 点击日记右侧的删除按钮
  - 确认删除后不可恢复
- **写作时长**：每篇日记下方显示写作用时
- **AI 回复**：如果有 AI 反馈，会显示在日记下方

### 3. 时间格（月度视图）

- **月度概览**：以网格形式展示每月写作情况
- **日记详情**：点击日期格可查看当天日记
- **月度收信**：
  - 点击"收信"按钮获取月度情感信件
  - 系统会分析整月的情感倾向
  - 生成专属的月度回顾信件
- **历史月份**：向下滚动可加载更多历史月份

### 4. 信箱（情感信件）

- **信件列表**：展示所有月度情感信件
- **情感标记**：
  - 红色边框：情绪高涨
  - 蓝色边框：情绪平静
  - 灰色边框：情绪低落
- **信件操作**：
  - 点击信件查看完整内容
  - 鼠标悬停可显示删除按钮
  - 删除前需二次确认

## 注意事项

1. **写作时间**：
   - 每天只能写一篇日记
   - 错过当天无法补写
   - 次日 0 点重置写作机会

2. **数据安全**：
   - 删除操作不可撤销
   - 建议重要内容提前备份

3. **使用建议**：
   - 保持每天写作的习惯
   - 认真对待每次写作
   - 定期查看月度回顾，关注情感变化

## 技术支持

如遇到问题或需要帮助，请联系技术支持。

## 本地部署指南

### 环境要求

- Python 3.8+
- MySQL 5.7+
- 现代浏览器（Chrome、Firefox、Safari 等）

### 1. 数据库配置

1. 创建数据库：
   ```sql
   CREATE DATABASE diary CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
   ```

2. 导入数据表：
   ```bash
   mysql -u your_username -p diary < script.sql
   ```

### 2. 后端配置

1. 安装依赖：
   ```bash
   pip install flask flask-cors pymysql openai
   ```

2. 配置文件：
   - 创建 `config.py` 文件
   - 添加以下内容：
   ```python
   # DeepSeek API 密钥
   API_KEY = "your_api_key"
   ```

3. 修改数据库连接：
   - 在 `app.py` 中更新数据库配置：
   ```python
   db = pymysql.connect(
       host="localhost",
       user="your_username",
       password="your_password",
       database="diary",
       charset="utf8mb4"
   )
   ```

### 3. 前端部署

1. 文件结构：
   ```
   /your_project_folder
   ├── app.py
   ├── config.py
   ├── index.html
   ├── diary_flow.html
   ├── time_grid.html
   ├── inbox.html
   └── style.css
   ```

2. 启动服务：
   ```bash
   python app.py
   ```

3. 访问应用：
   - 打开浏览器
   - 访问 `http://localhost:5000/index.html`

### 4. 注意事项

- 确保 MySQL 服务已启动
- 检查防火墙是否允许 5000 端口访问
- 保证 API_KEY 的有效性
- 定期备份数据库

---
祝你享受写作的过程，记录美好的生活！



